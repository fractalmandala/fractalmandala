<script lang="ts">

	import { browser } from '$app/environment';
	import visibilityMode from '$lib/stores/visibility';
	let fake = false;

	function fauxfake() {
		fake = !fake;
	}

	function toggleVisibility() {
		if (browser) {
			visibilityMode.update((mode) => {
				const newMode = !mode;
				localStorage.setItem('visibilityMode', JSON.stringify(newMode));
				return newMode;
			});
		}
	}

</script>

<div class="rta-icon rta-row ycenter" on:click={toggleVisibility} on:keydown={fauxfake}>
	{#if !$visibilityMode}
		<svg width="32" height="32" viewBox="0 0 32 32" fill="none" xmlns="http://www.w3.org/2000/svg">
			<path d="M16 28C12.6667 28 9.83333 26.8333 7.5 24.5C5.16667 22.1667 4 19.3333 4 16C4 12.6667 5.16667 9.83333 7.5 7.5C9.83333 5.16667 12.6667 4 16 4C16.1778 4 16.3667 4.00556 16.5667 4.01667C16.7667 4.02778 17.0222 4.04444 17.3333 4.06667C16.5333 4.77778 15.9111 5.65556 15.4667 6.7C15.0222 7.74444 14.8 8.84444 14.8 10C14.8 12 15.5 13.7 16.9 15.1C18.3 16.5 20 17.2 22 17.2C23.1556 17.2 24.2556 16.9944 25.3 16.5833C26.3444 16.1722 27.2222 15.6 27.9333 14.8667C27.9556 15.1333 27.9722 15.35 27.9833 15.5167C27.9944 15.6833 28 15.8444 28 16C28 19.3333 26.8333 22.1667 24.5 24.5C22.1667 26.8333 19.3333 28 16 28Z" fill="#474747"/>
		</svg>
	{:else}
		<svg width="32" height="32" viewBox="0 0 32 32" fill="none" xmlns="http://www.w3.org/2000/svg">
			<path d="M15.9987 22.6663C14.1543 22.6663 12.582 22.0163 11.282 20.7163C9.98203 19.4163 9.33203 17.8441 9.33203 15.9997C9.33203 14.1552 9.98203 12.583 11.282 11.283C12.582 9.98301 14.1543 9.33301 15.9987 9.33301C17.8431 9.33301 19.4154 9.98301 20.7154 11.283C22.0154 12.583 22.6654 14.1552 22.6654 15.9997C22.6654 17.8441 22.0154 19.4163 20.7154 20.7163C19.4154 22.0163 17.8431 22.6663 15.9987 22.6663ZM2.33203 16.9997C2.0487 16.9997 1.8112 16.9033 1.61953 16.7105C1.42786 16.5177 1.33203 16.2788 1.33203 15.9938C1.33203 15.7088 1.42786 15.4719 1.61953 15.283C1.8112 15.0941 2.0487 14.9997 2.33203 14.9997H5.66536C5.9487 14.9997 6.1862 15.0961 6.37786 15.2888C6.56953 15.4816 6.66536 15.7205 6.66536 16.0055C6.66536 16.2905 6.56953 16.5275 6.37786 16.7163C6.1862 16.9052 5.9487 16.9997 5.66536 16.9997H2.33203ZM26.332 16.9997C26.0487 16.9997 25.8112 16.9033 25.6195 16.7105C25.4279 16.5177 25.332 16.2788 25.332 15.9938C25.332 15.7088 25.4279 15.4719 25.6195 15.283C25.8112 15.0941 26.0487 14.9997 26.332 14.9997H29.6654C29.9487 14.9997 30.1862 15.0961 30.3779 15.2888C30.5695 15.4816 30.6654 15.7205 30.6654 16.0055C30.6654 16.2905 30.5695 16.5275 30.3779 16.7163C30.1862 16.9052 29.9487 16.9997 29.6654 16.9997H26.332ZM15.9929 6.66634C15.7079 6.66634 15.4709 6.57051 15.282 6.37884C15.0931 6.18717 14.9987 5.94967 14.9987 5.66634V2.33301C14.9987 2.04967 15.0951 1.81217 15.2879 1.62051C15.4807 1.42884 15.7196 1.33301 16.0045 1.33301C16.2895 1.33301 16.5265 1.42884 16.7154 1.62051C16.9043 1.81217 16.9987 2.04967 16.9987 2.33301V5.66634C16.9987 5.94967 16.9023 6.18717 16.7095 6.37884C16.5167 6.57051 16.2778 6.66634 15.9929 6.66634ZM15.9929 30.6663C15.7079 30.6663 15.4709 30.5706 15.282 30.379C15.0931 30.1872 14.9987 29.9497 14.9987 29.6663V26.333C14.9987 26.0497 15.0951 25.8122 15.2879 25.6205C15.4807 25.4288 15.7196 25.333 16.0045 25.333C16.2895 25.333 16.5265 25.4288 16.7154 25.6205C16.9043 25.8122 16.9987 26.0497 16.9987 26.333V29.6663C16.9987 29.9497 16.9023 30.1872 16.7095 30.379C16.5167 30.5706 16.2778 30.6663 15.9929 30.6663ZM7.9987 9.39967L6.0987 7.53301C5.8987 7.33301 5.80282 7.09297 5.81106 6.81291C5.81929 6.53282 5.91402 6.29393 6.09526 6.09624C6.29295 5.89853 6.53184 5.79967 6.81193 5.79967C7.092 5.79967 7.33203 5.89967 7.53203 6.09967L9.3987 7.99967C9.57648 8.19967 9.66537 8.43301 9.66537 8.69967C9.66537 8.96634 9.57648 9.19412 9.3987 9.38301C9.22092 9.5719 8.99314 9.66634 8.71536 9.66634C8.43759 9.66634 8.1987 9.57745 7.9987 9.39967ZM24.4654 25.8997L22.5987 23.9997C22.4209 23.7997 22.332 23.5622 22.332 23.2872C22.332 23.0122 22.4265 22.783 22.6154 22.5997C22.8043 22.3997 23.032 22.2997 23.2987 22.2997C23.5654 22.2997 23.7987 22.3997 23.9987 22.5997L25.8987 24.4663C26.0987 24.6663 26.1946 24.9064 26.1863 25.1864C26.1781 25.4665 26.0834 25.7054 25.9021 25.9031C25.7044 26.1008 25.4656 26.1997 25.1855 26.1997C24.9054 26.1997 24.6654 26.0997 24.4654 25.8997ZM22.5987 9.39967C22.3987 9.19967 22.2987 8.96634 22.2987 8.69967C22.2987 8.43301 22.3987 8.19967 22.5987 7.99967L24.4654 6.09967C24.6654 5.89967 24.9054 5.8038 25.1855 5.81204C25.4656 5.82026 25.7044 5.915 25.9021 6.09624C26.0998 6.29393 26.1987 6.53282 26.1987 6.81291C26.1987 7.09297 26.0987 7.33301 25.8987 7.53301L23.9987 9.39967C23.8209 9.57745 23.5947 9.66634 23.3199 9.66634C23.0452 9.66634 22.8048 9.57745 22.5987 9.39967ZM6.09526 25.9031C5.89755 25.7054 5.7987 25.4665 5.7987 25.1864C5.7987 24.9064 5.8987 24.6663 6.0987 24.4663L7.9987 22.5997C8.19425 22.3997 8.42648 22.2997 8.69536 22.2997C8.96425 22.2997 9.19435 22.3997 9.38567 22.5997C9.59435 22.7997 9.6987 23.033 9.6987 23.2997C9.6987 23.5663 9.5987 23.7997 9.3987 23.9997L7.53203 25.8997C7.33203 26.0997 7.092 26.1956 6.81193 26.1873C6.53184 26.1791 6.29295 26.0844 6.09526 25.9031Z" fill="#474747"/>
		</svg>
	{/if}
</div>

<style lang="sass">

.rta-icon
	cursor: pointer
	svg
		height: 24px
		object-fit: contain
		transition: 0.13s
		transform-origin: center center
	&:hover
		svg path
			fill: #10D56C
		svg
			transform: scale(0.88)

</style>